{"ast":null,"code":"import { FoodLog } from '../models/FoodLog';\nimport { nanoid } from 'nanoid';\nimport { WeightLog } from '../models/WeightLog';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"primeng/api\";\nimport * as i3 from \"@angular/common/http\";\nimport * as i4 from \"./firebase.service\";\nimport * as i5 from \"./local-storage.service\";\nexport class TrackingService {\n  constructor(router, messageService, http, firebaseService, localStorageService) {\n    this.router = router;\n    this.messageService = messageService;\n    this.http = http;\n    this.firebaseService = firebaseService;\n    this.localStorageService = localStorageService;\n    this.userFoodLog = [];\n    this.userWeightLog = [];\n  }\n  getFoodLog() {\n    const uid = this.firebaseService.currentUID;\n    this.userFoodLog = [new FoodLog('test', 1, 3, 2, 4, new Date(), '2')];\n    this.http.get(`http://localhost:3000/tracking/foodlog/history/${uid}`).subscribe(response => {\n      for (var i = 0; i < response.length; i++) {\n        this.userFoodLog.push(new FoodLog(response[i].name, response[i].calories, response[i].fat, response[i].carbs, response[i].protein, new Date(response[i].created_at), response[i].id));\n      }\n      localStorage.clear();\n      this.localStorageService.setData(this.userFoodLog);\n    });\n  }\n  addFoodLog(foodLog) {\n    const calories = foodLog.calories;\n    const fat = foodLog.fat;\n    const carbs = foodLog.carbs;\n    const protein = foodLog.protein;\n    const uid = this.firebaseService.currentUID;\n    const timeAdded = new Date();\n    const foodLogID = nanoid(5);\n    console.log(foodLogID);\n    var name = '';\n    if (foodLog.name != '') name = foodLog.name;else name = 'Quick Add';\n    this.http.post('http://localhost:3000/tracking/foodlog', {\n      calories,\n      fat,\n      carbs,\n      protein,\n      uid,\n      timeAdded,\n      name,\n      foodLogID\n    }).subscribe({\n      next: () => {\n        console.log('Food added to database');\n        this.getFoodLog();\n      }\n    });\n  }\n  deleteFoodLog(foodLogID) {\n    console.log('function called');\n    this.http.delete(`http://localhost:3000/tracking/foodlog/${foodLogID}`).subscribe({\n      next: () => {\n        console.log(\"Food log deleted.\");\n        this.getFoodLog();\n      },\n      error: error => {\n        console.log(error);\n      }\n    });\n  }\n  addWeightLog(weightLog) {\n    const weight = weightLog.weight;\n    const uid = this.firebaseService.currentUID;\n    const timeAdded = new Date();\n    const weightLogID = nanoid(5);\n    var name = '';\n    this.http.post('http://localhost:3000/tracking/weights/add-weight', {\n      weight,\n      uid,\n      timeAdded,\n      weightLogID\n    }).subscribe({\n      next: () => {\n        console.log('weight added to database');\n        this.getWeightLog();\n      }\n    });\n  }\n  getWeightLog() {\n    const uid = this.firebaseService.currentUID;\n    this.userWeightLog = [];\n    this.http.get(`http://localhost:3000/tracking/weights/get-weights/${uid}`).subscribe(response => {\n      for (var i = 0; i < response.length; i++) {\n        this.userWeightLog.push(new WeightLog(response[i].weight, response[i].id, new Date(response[i].date)));\n      }\n      console.log(this.userWeightLog);\n    });\n  }\n}\nTrackingService.ɵfac = function TrackingService_Factory(t) {\n  return new (t || TrackingService)(i0.ɵɵinject(i1.Router), i0.ɵɵinject(i2.MessageService), i0.ɵɵinject(i3.HttpClient), i0.ɵɵinject(i4.FirebaseService), i0.ɵɵinject(i5.LocalStorageService));\n};\nTrackingService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: TrackingService,\n  factory: TrackingService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"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","names":["FoodLog","nanoid","WeightLog","TrackingService","constructor","router","messageService","http","firebaseService","localStorageService","getFoodLog","uid","currentUID","userFoodLog","Date","get","subscribe","response","i","length","push","name","calories","fat","carbs","protein","created_at","id","localStorage","clear","setData","addFoodLog","foodLog","timeAdded","foodLogID","console","log","post","next","deleteFoodLog","delete","error","addWeightLog","weightLog","weight","weightLogID","getWeightLog","userWeightLog","date","factory","providedIn"],"sourceRoot":"","sources":["/Users/jeremiahnavarro/Documents/GitHub/health-tracker-v2/root/frontend/src/app/service/tracking.service.ts"],"sourcesContent":["import { EventEmitter, Injectable, Output } from '@angular/core';\nimport { AngularFireAuth } from '@angular/fire/compat/auth';\nimport { HttpClient } from '@angular/common/http';\nimport { Router } from '@angular/router';\nimport { createUserWithEmailAndPassword, getAuth, sendEmailVerification, sendSignInLinkToEmail, UserCredential } from \"firebase/auth\";\nimport { MessageService } from 'primeng/api';\nimport { FoodLog } from '../models/FoodLog';\nimport { nanoid } from 'nanoid';\nimport { FirebaseService } from './firebase.service';\nimport { WeightLog } from '../models/WeightLog';\nimport { LocalStorageService } from './local-storage.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class TrackingService {\n    userFoodLog: FoodLog[] = []\n    userWeightLog: WeightLog[] = []\n  \n    constructor(\n    private router: Router, \n    private messageService: MessageService,\n    private http: HttpClient,\n    private firebaseService: FirebaseService,\n    private localStorageService: LocalStorageService)  { \n\n  }\n\n  getFoodLog() {\n    const uid = this.firebaseService.currentUID\n\n    this.userFoodLog = [new FoodLog('test', 1,3,2,4,new Date(),'2')]\n    this.http.get(`http://localhost:3000/tracking/foodlog/history/${uid}`).subscribe((response: any) => {\n      for(var i = 0; i < response.length; i++) {\n        this.userFoodLog.push(new FoodLog(\n          response[i].name,\n          response[i].calories,\n          response[i].fat,\n          response[i].carbs,\n          response[i].protein,\n          new Date(response[i].created_at),\n          response[i].id\n        ))\n        }\n        localStorage.clear()\n        this.localStorageService.setData(this.userFoodLog)\n    })\n\n  }\n\n  addFoodLog(foodLog: FoodLog) {\n    const calories = foodLog.calories\n    const fat = foodLog.fat\n    const carbs = foodLog.carbs\n    const protein = foodLog.protein\n    const uid = this.firebaseService.currentUID\n    const timeAdded = new Date()\n    const foodLogID = nanoid(5)\n    console.log(foodLogID)\n    var name = ''\n\n    if(foodLog.name != '')\n        name = foodLog.name\n    else\n        name = 'Quick Add'\n\n    this.http.post('http://localhost:3000/tracking/foodlog', {calories, fat, carbs, protein, uid, timeAdded, name, foodLogID}).subscribe({\n      next: () => {\n        console.log('Food added to database')\n        this.getFoodLog()\n      }\n    })\n  }\n\n  deleteFoodLog(foodLogID: string) {\n    console.log('function called')\n    this.http.delete(`http://localhost:3000/tracking/foodlog/${foodLogID}`).subscribe({\n      next: () => {\n    console.log(\"Food log deleted.\");\n    this.getFoodLog();\n  },\n  error: (error) => {\n    console.log(error);\n  }\n});\n  }\n\n  addWeightLog(weightLog: WeightLog) {\n    const weight = weightLog.weight\n    const uid = this.firebaseService.currentUID\n    const timeAdded = new Date()\n    const weightLogID = nanoid(5)\n    var name = ''\n\n    this.http.post('http://localhost:3000/tracking/weights/add-weight', {weight,  uid, timeAdded,  weightLogID}).subscribe({\n      next: () => {\n        console.log('weight added to database')\n        this.getWeightLog()\n      }\n    })\n  }\n\n  getWeightLog() {\n    const uid = this.firebaseService.currentUID\n    this.userWeightLog = []\n\n    this.http.get(`http://localhost:3000/tracking/weights/get-weights/${uid}`).subscribe((response: any) => {\n      for(var i = 0; i < response.length; i++) {\n        this.userWeightLog.push(new WeightLog(\n          response[i].weight,\n          response[i].id,\n          new Date(response[i].date)\n        ))\n      }\n      console.log(this.userWeightLog)\n    })\n  }\n  \n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}